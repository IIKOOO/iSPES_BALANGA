<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Accounts</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/spes_logo.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-primary py-0 mb-2 sticky-top">
        <div class="container-fluid">
          <!--<a href=""><img class="m-0" style="height: 50px; width: 50px;" src="{{ url_for ('static', filename='images/peso_balanga_logo.png') }}" alt="Logo"></a>-->
          <a class="navbar-brand" href="{{url_for('index')}}"><img class="m-0" style="height: 40px; width: 40px;" src="{{ url_for('static', filename='images/spes_logo.png') }}" alt="Logo"></a> 
          <button class="navbar-toggler shadow bg-info" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="{{ url_for('login.login_admin') }}">{{ role }} {{ admin_name }} Dashboard</a>
              </li>
            </ul>
          </div>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row g3 text-center mb-2">
            <div class="col-md-4">
                <a href="{{ url_for('admin.admin_adminAcc') }}" class="btn btn-lg w-100 border border-dark text-white" style="background-color: #003366;">Admin Accounts</a>
            </div>
            <div class="col-md-4">
                <a href="{{ url_for('admin.admin_studentAcc') }}" class="btn btn-lg w-100 border border-dark text-dark" style="background-color: #98c1d9;">Student Accounts</a>
            </div>
            <div class="col-md-4">
                <a href="{{ url_for('admin.admin_pesoAcc') }}" class="btn btn-lg w-100 border border-dark text-white" style="background-color: #003366;">PESO Accounts</a>
            </div>
        </div>
    </div>
    <div class="admin_container">
        <div class="left_side m-1 border rounded">
          <div class="p-2 d-flex justify-content-between align-items-center">
            <div>
              <h2 class="text-center" style="font-weight: bold;">Student Accounts </h2>
            </div>
            <div class="input-group" style="width: 400px; margin-left: auto;">
              <div class="me-1">
                <select id="studentFilterStatus" class="form-select">
                  <option value="all">All</option>
                  <option value="active">Active</option>
                  <option value="inactive">Inactive</option>
                </select>
              </div>
              <input id="studentSearchInput" class="form-control border-primary rounded-start-2" type="search" placeholder="Search by name or ID" aria-label="Search">
              <!-- <button class="btn btn-success" id="retrieveBtn" type="button"><i class="bi bi-search me-2"></i>Search</button> -->
            </div>
          </div>
          <div style="max-height: 820px; overflow-y: auto;">
            <table class="table table-secondary table-striped">
              <thead class="table-dark sticky-top">
                  <tr>
                    <th>ID</th>
                    <th>Last Name</th>
                    <th>First Name</th>
                    <th>Birth Date</th>
                    <th>Gender</th>
                    <th>Student Category</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Mobile No:</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="studentTableBody"></tbody>
            </table>
          </div>
        </div>
        <div class="right_side m-1 rounded" style="background-color: #98c1d9;">
          <div class="container-fluid">
            <div class="card mt-3 shadow-sm">
                <div class="card-header text-white" style="background-color: #003366;">
                    <h5 class="mb-0">Student Account Summary</h5>
                </div>
                <div class="card-body text-center">
                    <h5 class="fw-bold">Total Accounts</h5>
                    <h3 class="text-primary fw-bold"><span id="studentTotal">0</span></h3>
                    <div class="mt-1">
                        <div class="d-flex justify-content-between">
                            <p class="fw-bold text-success">Active:</p>
                            <p class="fw-bold text-success"><span id="studentActive">0</span></p>
                        </div>
                        <div class="d-flex justify-content-between">
                            <p class="fw-bold text-danger">Inactive:</p>
                            <p class="fw-bold text-danger"><span id="studentInactive">0</span></p>
                        </div>
                    </div>
                </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="adminAuthModal" tabindex="-1" aria-labelledby="adminAuthModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <form id="adminAuthForm" class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="adminAuthModalLabel">Admin Authentication</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="adminAuthUsername" class="form-label">Username</label>
                <input type="text" class="form-control" id="adminAuthUsername" required>
              </div>
              <div class="mb-3">
                <label for="adminAuthPassword" class="form-label">Password</label>
                <input type="password" class="form-control" id="adminAuthPassword" required>
              </div>
              <div id="adminAuthError" class="text-danger" style="display:none;"></div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Authenticate</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Student Password Update Modal -->
      <div class="modal fade" id="studentPasswordUpdateModal" tabindex="-1" aria-labelledby="studentPasswordUpdateModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <form id="studentPasswordUpdateForm" class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="studentPasswordUpdateModalLabel">Update Student Password</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <input type="hidden" id="updateStudentId">
              <div class="mb-3">
                <label for="newStudentPassword" class="form-label">New Password</label>
                <input type="password" class="form-control" id="newStudentPassword" required minlength="5">
              </div>
              <div id="studentPasswordUpdateError" class="text-danger" style="display:none;"></div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-success">Update Password</button>
            </div>
          </form>
        </div>
      </div>
      <!--Toast Container-->
      <div aria-live="polite" aria-atomic="true" class="position-relative">
        <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 2000;">
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% for category, message in messages %}
              <div id="msgToast" class="toast show align-items-center text-bg-{{ category }} border border-dark round-3" role="alert" aria-live="assertive" aria-atomic="true" style="min-width: 200px; min-height: 40px; font-size: 1rem;">
                <div class="toast-header bg-dark text-light">
                  <img src="{{ url_for('static', filename='images/spes_logo.png') }}" class="rounded me-2" style="height: 30px; width: 30px;" alt="spes logo">
                  <strong class="me-auto">Admin Page:</strong>
                  <small>Student accounts</small>
                  <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body text-dark">
                  {{ message }}
                </div>
              </div>
            {% endfor %}
          {% endwith %}
        </div>
      </div>
    <script src="{{ url_for('static', filename='admin_script.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>